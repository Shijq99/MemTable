MemTable 主要可以划分为以下几个模块：

- **client**：交互式客户端；
- **config**：配置文件的解析与监控；
- **db**：内存数据库以及各种数据结构的定义，数据库命令的实现；
- **logger**：日志组件的相关代码；
- **resp**：定义各种 resp 格式消息的数据结构、提供解析和生成 resp 消息的各种函数；
- **server**：服务器的各项核心功能；
- **utils**：项目中会用到的一些独立功能。

## db

内存数据库的实现基于分片哈希表，每一个 DataBase 结构体内都有 slotNum 个哈希表，每一个哈希表被视为一个 Slot。每一个 key 被写入数据库时，先通过 crc16 计算出哈希值，然后选择对应的 Slot 写入。



这样做的目的是对数据库进行分片，后续构建 Cluster 集群时，可以直接按照 Slot 对数据库进行划分，能够更加轻松地完成数据的搬移。



### 监听与阻塞机制

要实现`watch`和`brpop`等命令，数据库中必须有相应的通知机制。这里采取的做法是将客户端的通知 channel 注册到数据库中，